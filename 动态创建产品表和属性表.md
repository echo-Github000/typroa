### 动态创建产品表和属性表

#### 背景：

由于之前的遗留问题，在新产品的导入流程中需要网关在本地的静态表中对该产品支持，同时还有对该产品相关属性的支持，这就涉及到每添加一款新产品就要修改网关的代码去支持，灵活性大大降低。故现考虑将网关的两个静态表（产品表和属性表）进行动态填充，这样新增一款简单产品就可以不用去修改网关的代码，直接上线。

#### 具体策略：

1. 属性表的动态填充：新增mapping文件中的相关属性字段，新产品入网获取mapping后，根据mapping的相关字段填充本地的静态属性表。
2. 产品表的动态填充：由于子设备入网，在check拓扑结构的时候会去本地的产品表校验该产品的有效性，故产品表的动态添加就不能依据mapping来获得，因为获取mapping文件的时机要晚于check拓扑；经和平台讨论，平台维护一个支持动态接入的产品列表，在网关启动后通过指定的接口向平台请求产品表并动态填充到本地静态表，同时将该表保存到数据库，网关断网重启后仍可以从数据库中恢复该表。